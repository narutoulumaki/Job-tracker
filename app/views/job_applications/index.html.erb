<h1> Applications </h1>

<%= form_with url: job_applications_path, method: :get, local: true do |f| %>
  <%= f.select :status, JobApplication.statuses.keys, include_blank: "All statuses" %>
  <%= f.submit "Filter" %>
<% end %>

<% @job_applications.each do |app| %>
  <div>
    <p>Job: <%= app.job.title %></p>
    <p>Candidate: <%= app.candidate.email %></p>
    <p>Status: <%= app.status %></p>

    <%= link_to "View", job_application_path(app) %>

    <% if current_user.admin? || current_user.staff? %>
      <%= form_with model: app, method: :patch, local: true do |f| %>
        <%= f.select :status, JobApplication.statuses.keys %>
        <%= f.submit "Update Status" %>
      <% end %>
    <% end %>
  </div>
  <hr>
<% end %>
